<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRIZ Innovation Hub by Craicek </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .gradient-text {
            background: linear-gradient(to right, #4ade80, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .card {
            background-color: #1f2937;
            border: 1px solid #374151;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: fadeIn 0.5s ease-out forwards;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
        }
        select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='2' stroke='%239ca3af' class='w-6 h-6'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M19.5 8.25l-7.5 7.5-7.5-7.5' /%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold mb-2">
                <span class="gradient-text">TRIZ Innovation Hub</span>
            </h1>
            <p class="text-lg text-gray-400">Risolvi le contraddizioni e scatena l'innovazione.</p>
        </header>

        <main class="bg-gray-800 shadow-2xl rounded-2xl p-6 md:p-10 max-w-5xl mx-auto">
            
            <div class="mb-10">
                <h2 class="text-2xl font-semibold mb-2 text-green-400">Passo 1: Definisci la tua Contraddizione</h2>
                <p class="text-gray-400 mb-6">Seleziona la caratteristica del sistema che vuoi migliorare e quella che, di conseguenza, peggiora.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label for="improving-feature" class="block mb-2 font-medium text-gray-300">Caratteristica da Migliorare:</label>
                        <select id="improving-feature" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-2 focus:ring-green-500 focus:border-green-500">
                            <option value="">Seleziona...</option>
                        </select>
                    </div>
                    <div>
                        <label for="worsening-feature" class="block mb-2 font-medium text-gray-300">Caratteristica che Peggiora:</label>
                        <select id="worsening-feature" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="">Seleziona...</option>
                        </select>
                    </div>
                </div>
                <button id="reset-button" class="w-full md:w-auto bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                    Reset
                </button>
            </div>

            <div>
                <h2 class="text-2xl font-semibold mb-2 text-blue-400">Passo 2: Scopri i Principi Inventivi</h2>
                <p id="principles-subtitle" class="text-gray-400 mb-6">I principi raccomandati per risolvere la tua contraddizione appariranno qui.</p>
                <div id="principles-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                     <div id="placeholder" class="col-span-full text-center py-12 border-2 border-dashed border-gray-600 rounded-lg">
                        <svg class="mx-auto h-12 w-12 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                          <path vector-effect="non-scaling-stroke" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c.251.023.501.05.75.082a.75.75 0 01.75.75v5.714a2.25 2.25 0 00.659 1.591L14.25 14.5M9.75 3.104a13.42 13.42 0 00-3.28-1.252.5.5 0 00-.51.274l-.938 1.956a.5.5 0 00.274.51l.938.469a13.42 13.42 0 003.28 1.252M14.25 14.5L19 9.75V3.104c0-.414-.336-.75-.75-.75h-5.714a.75.75 0 00-.75.75v5.714c0 .414.336.75.75.75h4.5a.75.75 0 00.659-.409l.866-1.5M14.25 14.5a13.42 13.42 0 01-3.28 1.252.5.5 0 01-.51-.274l-.938-1.956a.5.5 0 01.274-.51l.938-.469a13.42 13.42 0 013.28-1.252" />
                        </svg>
                        <h3 class="mt-2 text-lg font-medium text-gray-300">In attesa della tua selezione</h3>
                        <p class="mt-1 text-sm text-gray-500">Scegli le caratteristiche per vedere i principi.</p>
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="text-center mt-10 text-gray-500 text-sm">
            <p>Creato con passione per l'innovazione sistematica da Craicek.</p>
        </footer>
    </div>

    <div id="principle-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div class="modal-content bg-gray-800 rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-8 transform scale-95 opacity-0">
            <div class="flex justify-between items-start mb-4">
                <div>
                    <h3 id="modal-title" class="text-3xl font-bold gradient-text"></h3>
                    <p id="modal-id" class="text-gray-400 text-sm"></p>
                </div>
                <button id="close-modal" class="text-gray-400 hover:text-white transition-colors">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div id="modal-body" class="text-gray-300 prose prose-invert max-w-none">
                </div>
        </div>
    </div>

    <script>
        // --- DATA (Same as before) ---
        const parameters = [
            "1. Peso di un oggetto mobile", "2. Peso di un oggetto stazionario", "3. Lunghezza di un oggetto mobile", "4. Lunghezza di un oggetto stazionario", "5. Area di un oggetto mobile", "6. Area di un oggetto stazionario", "7. Volume di un oggetto mobile", "8. Volume di un oggetto stazionario", "9. Velocità", "10. Forza", "11. Tensione, Pressione", "12. Forma", "13. Stabilità della composizione", "14. Resistenza", "15. Durata di un oggetto mobile", "16. Durata di un oggetto stazionario", "17. Temperatura", "18. Luminosità", "19. Energia usata (oggetto mobile)", "20. Energia usata (oggetto stazionario)", "21. Potenza", "22. Perdita di energia", "23. Perdita di sostanza", "24. Perdita di informazione", "25. Perdita di tempo", "26. Quantità di sostanza", "27. Affidabilità", "28. Precisione della misurazione", "29. Precisione della produzione", "30. Fattori esterni dannosi", "31. Effetti dannosi generati", "32. Facilità di produzione", "33. Facilità d'uso", "34. Facilità di riparazione", "35. Adattabilità, Versatilità", "36. Complessità del dispositivo", "37. Complessità del controllo", "38. Livello di automazione", "39. Produttività"
        ];
        const principles = {
             1: { name: "Segmentazione", desc: "Dividi un oggetto o un sistema in parti indipendenti. Rendi un oggetto facile da smontare. Aumenta il grado di frammentazione o segmentazione.", examples: "Es: Mobili modulari, tastiere per computer pieghevoli, persiane avvolgibili." },
            2: { name: "Estrazione", desc: "Separa una parte o una proprietà 'interferente' da un oggetto, o estrai solo la parte o la proprietà necessaria.", examples: "Es: Aria condizionata che estrae il calore da una stanza, rimuovere il nocciolo da una ciliegia, usare un altoparlante per separare il suono dal sistema stereo." },
            3: { name: "Qualità Locale", desc: "Passa da una struttura omogenea a una non omogenea. Fai in modo che parti diverse di un oggetto svolgano funzioni diverse in condizioni diverse. Rendi ogni parte di un oggetto adatta alle sue condizioni operative.", examples: "Es: Matita con gomma all'estremità, contenitori per il pranzo con scomparti per cibi diversi, pneumatici con battistrada diversi per diverse condizioni stradali." },
            4: { name: "Asimmetria", desc: "Sostituisci una forma simmetrica con una asimmetrica. Se un oggetto è già asimmetrico, aumenta il suo grado di asimmetria.", examples: "Es: Lenti progressive per occhiali, pale di elicottero asimmetriche per una migliore aerodinamica, borse a tracolla." },
            5: { name: "Unione (Consolidamento)", desc: "Unisci oggetti o operazioni omogenei o simili nello spazio o nel tempo.", examples: "Es: Un multiutensile (es. coltellino svizzero), un chip per computer che integra più circuiti, un treno con più vagoni." },
            6: { name: "Universalità", desc: "Fai in modo che un oggetto o una parte svolga più funzioni, eliminando la necessità di altre parti.", examples: "Es: Divano letto, smartphone (telefono, fotocamera, GPS, etc.), sedile posteriore di un'auto che si ripiega per aumentare lo spazio di carico." },
            7: { name: "Matrioska (Nesting)", desc: "Inserisci un oggetto dentro un altro. Fai passare una parte attraverso una cavità di un'altra.", examples: "Es: Bambole russe Matrioska, antenne telescopiche, carrelli della spesa che si incastrano." },
            8: { name: "Contrappeso", desc: "Compensa il peso di un oggetto unendolo a un altro che fornisce una forza di sollevamento. Compensa una tendenza con una forza o un'interazione opposta.", examples: "Es: Ascensori con contrappesi, ali di aereo che generano portanza per contrastare la gravità, vele di una barca." },
            9: { name: "Azione preventiva contraria", desc: "Se un'azione ha effetti sia utili che dannosi, esegui un'azione contraria in anticipo per controllare gli effetti dannosi.", examples: "Es: Verniciatura antiruggine, addestramento antincendio, vaccinazioni." },
            10: { name: "Azione preventiva", desc: "Esegui un'azione richiesta in anticipo, del tutto o in parte. Disponi gli oggetti in modo che possano entrare in azione immediatamente dal posto più conveniente.", examples: "Es: Airbag in un'auto, maschere di ossigeno che cadono in aereo, preparazione degli ingredienti prima di cucinare (mise en place)." },
            11: { name: "Cuscino di sicurezza", desc: "Prepara mezzi di emergenza in anticipo per compensare la bassa affidabilità di un oggetto.", examples: "Es: Ruota di scorta, paracadute, generatore di backup." },
            12: { name: "Equipotenzialità", desc: "Limita i cambiamenti di posizione in un campo potenziale, ad esempio cambiando l'ambiente di lavoro per eliminare la necessità di sollevare o abbassare oggetti.", examples: "Es: Canali e chiuse per spostare le navi, linee di assemblaggio a nastro trasportatore, scivoli per bagagli negli aeroporti." },
            13: { name: "Inversione", desc: "Inverti l'azione usata per risolvere il problema. Rendi mobili le parti fisse e fisse le parti mobili. Capovolgi l'oggetto o il processo.", examples: "Es: Invece di avvitare, svitare. Invece di riscaldare, raffreddare. Girare una tazza per svuotarla." },
            14: { name: "Sferoidale, Curvatura", desc: "Sostituisci le parti lineari con quelle curve, le superfici piane con quelle sferiche. Usa rulli, sfere, spirali. Passa dal movimento rettilineo a quello rotatorio.", examples: "Es: Cuscinetti a sfera, mouse per computer con rotella di scorrimento, scale a chiocciola." },
            15: { name: "Dinamicità", desc: "Permetti alle caratteristiche di un oggetto, dell'ambiente o del processo di cambiare per essere ottimali o per trovare una condizione operativa ottimale. Dividi un oggetto in parti capaci di muoversi l'una rispetto all'altra.", examples: "Es: Volante regolabile, sedia da ufficio flessibile, lenti a fuoco variabile." },
            16: { name: "Azione parziale o eccessiva", desc: "Se è difficile ottenere il 100% di un effetto desiderato, ottieni un po' meno o un po' di più per semplificare notevolmente il problema.", examples: "Es: Riempire eccessivamente un contenitore e poi livellare l'eccesso per una misurazione precisa, verniciare a spruzzo con una leggera sovrapposizione per garantire una copertura completa." },
            17: { name: "Passaggio a una nuova dimensione", desc: "Sposta un oggetto o un sistema in due o tre dimensioni. Usa una disposizione a più piani. Inclina o riorienta l'oggetto.", examples: "Es: Circuiti stampati a più strati, parcheggi multipiano, tastiera ergonomica inclinata." },
            18: { name: "Vibrazione meccanica", desc: "Fai vibrare un oggetto o un sistema. Se c'è già vibrazione, aumentane la frequenza (fino all'ultrasuono). Usa la frequenza di risonanza.", examples: "Es: Spazzolino da denti elettrico, setacci vibranti industriali, bisturi a ultrasuoni." },
            19: { name: "Azione periodica", desc: "Sostituisci un'azione continua con una periodica (impulsi). Se l'azione è già periodica, cambia la sua frequenza o magnitudo.", examples: "Es: Lampeggianti di emergenza, martello pneumatico, sistemi di irrigazione a intermittenza." },
            20: { name: "Continuità dell'azione utile", desc: "Svolgi il lavoro continuamente, senza pause. Fai funzionare tutte le parti di un oggetto a pieno carico, tutto il tempo.", examples: "Es: Volano che immagazzina energia, processo di produzione a ciclo continuo, stampante con alimentazione continua della carta." },
            21: { name: "Scorrimento veloce (Rushing through)", desc: "Conduci un processo o alcune sue fasi (specialmente quelle dannose o pericolose) a velocità molto elevata.", examples: "Es: Taglio ad alta velocità per evitare il surriscaldamento del materiale, attraversare rapidamente una zona pericolosa." },
            22: { name: "Trasformare il danno in beneficio", desc: "Utilizza gli effetti o i fattori dannosi (come l'ambiente) per ottenere un effetto positivo. Elimina un fattore dannoso aggiungendolo a un altro fattore dannoso.", examples: "Es: Utilizzare il calore di scarto di un processo per generare elettricità, aggiungere rifiuti a un processo per neutralizzarli." },
            23: { name: "Feedback", desc: "Introduci il feedback (informazioni sul risultato di un'azione) per migliorare un processo o un'azione. Se il feedback è già utilizzato, cambiane la magnitudo o l'influenza.", examples: "Es: Termostato che regola la temperatura, cruise control in un'auto, controllo automatico del volume." },
            24: { name: "Intermediario", desc: "Usa un oggetto o un processo intermedio per trasferire o eseguire un'azione. Unisci temporaneamente un oggetto a un altro che è facile da rimuovere.", examples: "Es: Un fabbro che usa un martello (intermediario) per colpire uno scalpello (oggetto), usare un agente legante temporaneo." },
            25: { name: "Self-service", desc: "Fai in modo che un oggetto si serva, si organizzi o si ripari da solo eseguendo funzioni ausiliarie.", examples: "Es: Lenti auto-lubrificanti, piante che si auto-impollinano, software che si aggiorna automaticamente." },
            26: { name: "Copia", desc: "Invece di un oggetto reale, complesso, costoso o fragile, usa le sue copie semplificate o ottiche. Se si usano copie visibili, passa a copie a infrarossi o ultravioletti.", examples: "Es: Realtà virtuale per l'addestramento, mappe invece del territorio reale, codici a barre." },
            27: { name: "Oggetti economici e a vita breve", desc: "Sostituisci un oggetto costoso con una collezione di oggetti economici, sacrificando alcune qualità (come la longevità o la precisione).", examples: "Es: Bicchieri di carta, rasoi usa e getta, cerotti monouso." },
            28: { name: "Sostituzione del sistema meccanico", desc: "Sostituisci un sistema meccanico con uno sensoriale (ottico, acustico, tattile o olfattivo). Usa campi elettrici, magnetici ed elettromagnetici per interagire con l'oggetto.", examples: "Es: Apriporta automatico con sensore di movimento, controllo vocale, touch screen." },
            29: { name: "Pneumatica e idraulica", desc: "Usa parti gassose e liquide di un oggetto invece di quelle solide (es. gonfiabili, riempiti di liquido, cuscini d'aria, sistemi idrostatici).", examples: "Es: Freni idraulici in un'auto, sedie da ufficio con pistone a gas, materassi ad aria." },
            30: { name: "Gusci flessibili e film sottili", desc: "Usa gusci flessibili e film sottili invece di strutture tridimensionali. Isola l'oggetto dall'ambiente esterno usando gusci e film.", examples: "Es: Imballaggi a bolle d'aria, tende da campeggio, serre in plastica." },
            31: { name: "Materiali porosi", desc: "Rendi un oggetto poroso o aggiungi elementi porosi (inserti, rivestimenti). Se un oggetto è già poroso, usa i pori per introdurre una sostanza o una funzione utile.", examples: "Es: Filtri, spugne, mattoni porosi per l'isolamento." },
            32: { name: "Cambio di colore", desc: "Cambia il colore di un oggetto o del suo ambiente esterno. Cambia il grado di trasparenza di un oggetto o del suo ambiente.", examples: "Es: Lenti fotocromatiche che si scuriscono al sole, indicatori di temperatura che cambiano colore, vetri intelligenti che diventano opachi." },
            33: { name: "Omogeneità", desc: "Fai in modo che gli oggetti interagiscano con un oggetto dato dello stesso materiale (o con un materiale con proprietà simili).", examples: "Es: Contenitori e coperchi dello stesso materiale per un migliore riciclaggio, saldature tra metalli identici." },
            34: { name: "Scarto e rigenerazione", desc: "Scarta le parti di un oggetto che hanno esaurito la loro funzione o modificane le proprietà durante il funzionamento. Rigenera o ripristina le parti consumate di un oggetto.", examples: "Es: Cartucce per stampanti ricaricabili, capsule di caffè monouso, razzi a più stadi." },
            35: { name: "Trasformazione delle proprietà", desc: "Cambia lo stato fisico, la concentrazione, la densità o la flessibilità di un oggetto.", examples: "Es: Gel che diventa liquido quando viene agitato, materiali a memoria di forma, caffè istantaneo (da solido a liquido)." },
            36: { name: "Transizione di fase", desc: "Usa fenomeni che si verificano durante le transizioni di fase, come cambiamenti di volume o di calore.", examples: "Es: Motore a vapore (da acqua a vapore), heat pipe per il raffreddamento dei computer." },
            37: { name: "Espansione termica", desc: "Usa l'espansione (o la contrazione) termica dei materiali. Usa materiali diversi con diversi coefficienti di espansione termica.", examples: "Es: Termostati bimetallici, giunti di dilatazione nei ponti." },
            38: { name: "Ossidanti forti", desc: "Sostituisci l'aria comune con aria arricchita di ossigeno o con ossigeno puro. Usa ossigeno ionizzato.", examples: "Es: Saldatura ossiacetilenica per temperature più elevate, trattamenti con ossigeno in medicina." },
            39: { name: "Ambiente inerte", desc: "Sostituisci l'ambiente normale con uno inerte. Svolgi il processo nel vuoto.", examples: "Es: Confezionamento di alimenti in atmosfera modificata per prolungarne la conservazione, saldatura in atmosfera di argon." },
            40: { name: "Materiali compositi", desc: "Sostituisci materiali uniformi con materiali compositi (multi-strato).", examples: "Es: Fibra di carbonio, fibra di vetro, compensato, cemento armato." }
        };
        const matrix = {'1-2':[1,29,34,40],'1-3':[1,15,29,35],'1-4':[1,15,29,35],'1-5':[1,29,30,40],'1-6':[1,29,30,40],'1-7':[1,17,29,35],'1-8':[1,17,29,35],'1-9':[19,28,29,35],'1-10':[8,18,29,37],'1-11':[8,10,29,37],'1-12':[14,1,35],'1-13':[1,35,40],'1-14':[1,2,27,40],'1-15':[2,27,28,29],'1-16':[1,2,27,40],'1-17':[35,37,38],'1-18':[32,35,15],'1-19':[10,15,21,37],'1-20':[10,15,21,37],'1-21':[10,19,28,37],'1-22':[2,10,19,37],'1-23':[2,27,30],'1-24':[1,26,30],'1-25':[10,15,21],'1-26':[26,30],'1-27':[2,10,27],'1-28':[18,26,32],'1-29':[10,27,32],'1-30':[28,29,35],'1-31':[2,10,22],'1-32':[15,35,36],'1-33':[15,33,35],'1-34':[2,15,35],'1-35':[15,35],'1-36':[15,35,37],'1-37':[15,35,37],'1-38':[35,38],'1-39':[15,28,35],'2-3':[7,17,29,30],'2-4':[1,15,29,35],'2-5':[7,29,30,40],'2-6':[1,29,30,40],'2-7':[7,17,29,30],'2-8':[1,17,29,35],'2-9':[19,28,29,35],'2-10':[8,18,34,37],'2-11':[8,10,34,37],'2-12':[14,1,35],'2-13':[35,40,1],'2-14':[1,2,27,40],'2-15':[2,27,28,29],'2-16':[1,2,27,40],'2-17':[35,37,38],'2-18':[32,35,15],'2-19':[10,15,21,37],'2-20':[10,15,21,37],'2-21':[10,19,28,37],'2-22':[2,10,19,37],'2-23':[2,27,30],'2-24':[1,26,30],'2-25':[10,15,21],'2-26':[26,30],'2-27':[2,10,27],'2-28':[18,26,32],'2-29':[10,27,32],'2-30':[28,29,35],'2-31':[2,10,22],'2-32':[15,35,36],'2-33':[15,33,35],'2-34':[2,15,35],'2-35':[15,35],'2-36':[15,35,37],'2-37':[15,35,37],'2-38':[35,38],'2-39':[15,28,35],'3-4':[4,7,16],'3-5':[17,35],'3-6':[5,17],'3-7':[17,35],'3-8':[5,17],'3-9':[14,15,28],'3-10':[1,14,19,28],'3-11':[10,14,28,36],'3-12':[14,17],'3-13':[35,40],'3-14':[1,14,28,40],'3-15':[2,28,35],'3-16':[1,14,28,40],'3-17':[17,35,37],'3-18':[15,17,32],'3-19':[15,28],'3-20':[15,28],'3-21':[15,28,37],'3-22':[10,15,28],'3-23':[2,28,30],'3-24':[1,26,30],'3-25':[15,21],'3-26':[26,30],'3-27':[10,27],'3-28':[18,26,32],'3-29':[27,32],'3-30':[2,17,28],'3-31':[2,10,22],'3-32':[35,36],'3-33':[15,33,35],'3-34':[2,15,35],'3-35':[15,35],'3-36':[15,35,37],'3-37':[15,35,37],'3-38':[35,38],'3-39':[15,28,35],'4-5':[7,17],'4-6':[5,17],'4-7':[7,17],'4-8':[5,17],'4-9':[14,15,28],'4-10':[1,14,19,28],'4-11':[10,14,28,36],'4-12':[14,17],'4-13':[35,40],'4-14':[1,14,28,40],'4-15':[2,28,35],'4-16':[1,14,28,40],'4-17':[17,35,37],'4-18':[15,17,32],'4-19':[15,28],'4-20':[15,28],'4-21':[15,28,37],'4-22':[10,15,28],'4-23':[2,28,30],'4-24':[1,26,30],'4-25':[15,21],'4-26':[26,30],'4-27':[10,27],'4-28':[18,26,32],'4-29':[27,32],'4-30':[2,17,28],'4-31':[2,10,22],'4-32':[35,36],'4-33':[15,33,35],'4-34':[2,15,35],'4-35':[15,35],'4-36':[15,35,37],'4-37':[15,35,37],'4-38':[35,38],'4-39':[15,28,35],'5-6':[4,7,16],'5-7':[17,35],'5-8':[5,17],'5-9':[15,28,35],'5-10':[1,10,19,28],'5-11':[10,28,36],'5-12':[14,17],'5-13':[35,40],'5-14':[1,28,40],'5-15':[2,28,35],'5-16':[1,28,40],'5-17':[17,35,37],'5-18':[15,17,32],'5-19':[15,28],'5-20':[15,28],'5-21':[15,28,37],'5-22':[10,15,28],'5-23':[2,28,30],'5-24':[1,26,30],'5-25':[15,21],'5-26':[26,30],'5-27':[10,27],'5-28':[18,26,32],'5-29':[27,32],'5-30':[2,17,28],'5-31':[2,10,22],'5-32':[35,36],'5-33':[15,33,35],'5-34':[2,15,35],'5-35':[15,35],'5-36':[15,35,37],'5-37':[15,35,37],'5-38':[35,38],'5-39':[15,28,35],'6-7':[7,17],'6-8':[5,17],'6-9':[15,28,35],'6-10':[1,10,19,28],'6-11':[10,28,36],'6-12':[14,17],'6-13':[35,40],'6-14':[1,28,40],'6-15':[2,28,35],'6-16':[1,28,40],'6-17':[17,35,37],'6-18':[15,17,32],'6-19':[15,28],'6-20':[15,28],'6-21':[15,28,37],'6-22':[10,15,28],'6-23':[2,28,30],'6-24':[1,26,30],'6-25':[15,21],'6-26':[26,30],'6-27':[10,27],'6-28':[18,26,32],'6-29':[27,32],'6-30':[2,17,28],'6-31':[2,10,22],'6-32':[35,36],'6-33':[15,33,35],'6-34':[2,15,35],'6-35':[15,35],'6-36':[15,35,37],'6-37':[15,35,37],'6-38':[35,38],'6-39':[15,28,35],'7-8':[4,7,16],'7-9':[15,28,35],'7-10':[1,10,19,28],'7-11':[10,28,36],'7-12':[14,17],'7-13':[35,40],'7-14':[1,28,40],'7-15':[2,28,35],'7-16':[1,28,40],'7-17':[17,35,37],'7-18':[15,17,32],'7-19':[15,28],'7-20':[15,28],'7-21':[15,28,37],'7-22':[10,15,28],'7-23':[2,28,30],'7-24':[1,26,30],'7-25':[15,21],'7-26':[26,30],'7-27':[10,27],'7-28':[18,26,32],'7-29':[27,32],'7-30':[2,17,28],'7-31':[2,10,22],'7-32':[35,36],'7-33':[15,33,35],'7-34':[2,15,35],'7-35':[15,35],'7-36':[15,35,37],'7-37':[15,35,37],'7-38':[35,38],'7-39':[15,28,35],'8-9':[15,28,35],'8-10':[1,10,19,28],'8-11':[10,28,36],'8-12':[14,17],'8-13':[35,40],'8-14':[1,28,40],'8-15':[2,28,35],'8-16':[1,28,40],'8-17':[17,35,37],'8-18':[15,17,32],'8-19':[15,28],'8-20':[15,28],'8-21':[15,28,37],'8-22':[10,15,28],'8-23':[2,28,30],'8-24':[1,26,30],'8-25':[15,21],'8-26':[26,30],'8-27':[10,27],'8-28':[18,26,32],'8-29':[27,32],'8-30':[2,17,28],'8-31':[2,10,22],'8-32':[35,36],'8-33':[15,33,35],'8-34':[2,15,35],'8-35':[15,35],'8-36':[15,35,37],'8-37':[15,35,37],'8-38':[35,38],'8-39':[15,28,35],'9-10':[13,15,19,33],'9-11':[13,15,19,33],'9-12':[15,28],'9-13':[13,35],'9-14':[13,15,28],'9-15':[13,15,28],'9-16':[13,15,28],'9-17':[15,17,37],'9-18':[15,18],'9-19':[15,19],'9-20':[15,19],'9-21':[15,19,37],'9-22':[15,19,21],'9-23':[15,30],'9-24':[15,23,24],'9-25':[15,21],'9-26':[15,30],'9-27':[13,15],'9-28':[18,28],'9-29':[28,32],'9-30':[13,15,28],'9-31':[13,15,22],'9-32':[15,35],'9-33':[15,33,35],'9-34':[15,35],'9-35':[15,35],'9-36':[15,37],'9-37':[15,37],'9-38':[15,38],'9-39':[15,35],'10-11':[10,18,36],'10-12':[1,14,28,40],'10-13':[1,40],'10-14':[1,27,40],'10-15':[2,27,28],'10-16':[1,27,40],'10-17':[35,37],'10-18':[18,32],'10-19':[10,19],'10-20':[10,19],'10-21':[10,19,37],'10-22':[10,19],'10-23':[2,27,30],'10-24':[1,23,26],'10-25':[10,16],'10-26':[26,27],'10-27':[2,10,27],'10-28':[18,26,32],'10-29':[10,27,32],'10-30':[2,10,28],'10-31':[2,22,31],'10-32':[35,36],'10-33':[33,35],'10-34':[2,35],'10-35':[35],'10-36':[6,37],'10-37':[6,37],'10-38':[38],'10-39':[28,35],'11-12':[1,14,29,40],'11-13':[1,40],'11-14':[1,27,40],'11-15':[2,27,28],'11-16':[1,27,40],'11-17':[35,37],'11-18':[18,32],'11-19':[10,19],'11-20':[10,19],'11-21':[10,19,37],'11-22':[10,19],'11-23':[2,27,30],'11-24':[1,23,26],'11-25':[10,16],'11-26':[26,27],'11-27':[2,10,27],'11-28':[18,26,32],'11-29':[10,27,32],'11-30':[2,10,28],'11-31':[2,22,31],'11-32':[35,36],'11-33':[33,35],'11-34':[2,35],'11-35':[35],'11-36':[6,37],'11-37':[6,37],'11-38':[38],'11-39':[28,35],'12-13':[1,35,40],'12-14':[1,28,40],'12-15':[2,28,35],'12-16':[1,28,40],'12-17':[17,35,37],'12-18':[15,17,32],'12-19':[15,28],'12-20':[15,28],'12-21':[15,28,37],'12-22':[10,15,28],'12-23':[2,28,30],'12-24':[1,26,30],'12-25':[15,21],'12-26':[26,30],'12-27':[10,27],'12-28':[18,26,32],'12-29':[27,32],'12-30':[2,17,28],'12-31':[2,10,22],'12-32':[35,36],'12-33':[15,33,35],'12-34':[2,15,35],'12-35':[15,35],'12-36':[1,6,7],'12-37':[1,6,7],'12-38':[35,38],'12-39':[15,28,35],'13-14':[1,27,40],'13-15':[2,27,28,34],'13-16':[1,27,40],'13-17':[35,36,37],'13-18':[32],'13-19':[10,19],'13-20':[10,19],'13-21':[10,19,37],'13-22':[10,19],'13-23':[2,27,30],'13-24':[1,23,26],'13-25':[10,16],'13-26':[26,27],'13-27':[2,10,27],'13-28':[18,26,32],'13-29':[10,27,32],'13-30':[2,10,28],'13-31':[2,22,31],'13-32':[35,36],'13-33':[33,35],'13-34':[2,35],'13-35':[35],'13-36':[6,37],'13-37':[6,37],'13-38':[38],'13-39':[28,35],'14-15':[2,27,28],'14-16':[1,27,40],'14-17':[35,37],'14-18':[18,32],'14-19':[10,19],'14-20':[10,19],'14-21':[10,19,37],'14-22':[10,19],'14-23':[2,27,30],'14-24':[1,23,26],'14-25':[10,16],'14-26':[26,27],'14-27':[2,10,27],'14-28':[18,26,32],'14-29':[10,27,32],'14-30':[2,10,28],'14-31':[2,22,31],'14-32':[35,36],'14-33':[33,35],'14-34':[2,35],'14-35':[35],'14-36':[6,37],'14-37':[6,37],'14-38':[38],'14-39':[28,35],'15-17':[35,37],'15-18':[18,32],'15-19':[10,19],'15-20':[10,19],'15-21':[10,19,37],'15-22':[10,19],'15-23':[2,27,30],'15-24':[1,23,26],'15-25':[10,16],'15-26':[26,27],'15-27':[2,10,27],'15-28':[18,26,32],'15-29':[10,27,32],'15-30':[2,10,28],'15-31':[2,22,31],'15-32':[35,36],'15-33':[33,35],'15-34':[2,35],'15-35':[35],'15-36':[6,37],'15-37':[6,37],'15-38':[38],'15-39':[28,35],'16-17':[35,37],'16-18':[18,32],'16-19':[10,19],'16-20':[10,19],'16-21':[10,19,37],'16-22':[10,19],'16-23':[2,27,30],'16-24':[1,23,26],'16-25':[10,16],'16-26':[26,27],'16-27':[2,10,27],'16-28':[18,26,32],'16-29':[10,27,32],'16-30':[2,10,28],'16-31':[2,22,31],'16-32':[35,36],'16-33':[33,35],'16-34':[2,35],'16-35':[35],'16-36':[6,37],'16-37':[6,37],'16-38':[38],'16-39':[28,35],'17-18':[18,32],'17-19':[10,19],'17-20':[10,19],'17-21':[10,19,37],'17-22':[10,19],'17-23':[2,27,30],'17-24':[1,23,26],'17-25':[10,16],'17-26':[26,27],'17-27':[2,10,27],'17-28':[18,26,32],'17-29':[10,27,32],'17-30':[2,10,28],'17-31':[2,22,31],'17-32':[35,36],'17-33':[33,35],'17-34':[2,35],'17-35':[35],'17-36':[6,37],'17-37':[6,37],'17-38':[38],'17-39':[28,35],'18-19':[10,19],'18-20':[10,19],'18-21':[10,19,37],'18-22':[10,19],'18-23':[2,27,30],'18-24':[1,23,26],'18-25':[10,16],'18-26':[26,27],'18-27':[2,10,27],'18-28':[18,26,32],'18-29':[10,27,32],'18-30':[2,10,28],'18-31':[2,22,31],'18-32':[35,36],'18-33':[33,35],'18-34':[2,35],'18-35':[35],'18-36':[6,37],'18-37':[6,37],'18-38':[38],'18-39':[28,35],'19-21':[10,19,37],'19-22':[10,19],'19-23':[2,27,30],'19-24':[1,23,26],'19-25':[10,16],'19-26':[26,27],'19-27':[2,10,27],'19-28':[18,26,32],'19-29':[10,27,32],'19-30':[2,10,28],'19-31':[2,22,31],'19-32':[35,36],'19-33':[33,35],'19-34':[2,35],'19-35':[35],'19-36':[6,37],'19-37':[6,37],'19-38':[38],'19-39':[28,35],'20-21':[10,19,37],'20-22':[10,19],'20-23':[2,27,30],'20-24':[1,23,26],'20-25':[10,16],'20-26':[26,27],'20-27':[2,10,27],'20-28':[18,26,32],'20-29':[10,27,32],'20-30':[2,10,28],'20-31':[2,22,31],'20-32':[35,36],'20-33':[33,35],'20-34':[2,35],'20-35':[35],'20-36':[6,37],'20-37':[6,37],'20-38':[38],'20-39':[28,35],'21-22':[10,19],'21-23':[2,27,30],'21-24':[1,23,26],'21-25':[10,16],'21-26':[26,27],'21-27':[2,10,27],'21-28':[18,26,32],'21-29':[10,27,32],'21-30':[2,10,28],'21-31':[2,22,31],'21-32':[35,36],'21-33':[33,35],'21-34':[2,35],'21-35':[35],'21-36':[6,37],'21-37':[6,37],'21-38':[38],'21-39':[28,35],'22-23':[2,27,30],'22-24':[1,23,26],'22-25':[10,16],'22-26':[26,27],'22-27':[2,10,27],'22-28':[18,26,32],'22-29':[10,27,32],'22-30':[2,10,28],'22-31':[2,22,31],'22-32':[35,36],'22-33':[33,35],'22-34':[2,35],'22-35':[35],'22-36':[6,37],'22-37':[6,37],'22-38':[38],'22-39':[28,35],'23-24':[1,23,26],'23-25':[10,16],'23-26':[26,27],'23-27':[2,10,27],'23-28':[18,26,32],'23-29':[10,27,32],'23-30':[2,10,28],'23-31':[2,22,31],'23-32':[35,36],'23-33':[33,35],'23-34':[2,35],'23-35':[35],'23-36':[6,37],'23-37':[6,37],'23-38':[38],'23-39':[28,35],'24-25':[10,16],'24-26':[26,27],'24-27':[2,10,27],'24-28':[18,26,32],'24-29':[10,27,32],'24-30':[2,10,28],'24-31':[2,22,31],'24-32':[35,36],'24-33':[33,35],'24-34':[2,35],'24-35':[35],'24-36':[6,37],'24-37':[6,37],'24-38':[38],'24-39':[28,35],'25-26':[26,27],'25-27':[2,10,27],'25-28':[18,26,32],'25-29':[10,27,32],'25-30':[2,10,28],'25-31':[2,22,31],'25-32':[35,36],'25-33':[33,35],'25-34':[2,35],'25-35':[35],'25-36':[6,37],'25-37':[6,37],'25-38':[38],'25-39':[28,35],'26-27':[2,10,27],'26-28':[18,26,32],'26-29':[10,27,32],'26-30':[2,10,28],'26-31':[2,22,31],'26-32':[35,36],'26-33':[33,35],'26-34':[2,35],'26-35':[35],'26-36':[6,37],'26-37':[6,37],'26-38':[38],'26-39':[28,35],'27-28':[18,26,32],'27-29':[10,27,32],'27-30':[2,10,28],'27-31':[2,22,31],'27-32':[35,36],'27-33':[33,35],'27-34':[2,35],'27-35':[35],'27-36':[6,37],'27-37':[6,37],'27-38':[38],'27-39':[28,35],'28-29':[10,27,32],'28-30':[2,10,28],'28-31':[2,22,31],'28-32':[35,36],'28-33':[33,35],'28-34':[2,35],'28-35':[35],'28-36':[6,37],'28-37':[6,37],'28-38':[38],'28-39':[28,35],'29-30':[2,10,28],'29-31':[2,22,31],'29-32':[35,36],'29-33':[33,35],'29-34':[2,35],'29-35':[35],'29-36':[6,37],'29-37':[6,37],'29-38':[38],'29-39':[28,35],'30-31':[2,22,31],'30-32':[35,36],'30-33':[33,35],'30-34':[2,35],'30-35':[35],'30-36':[6,37],'30-37':[6,37],'30-38':[38],'30-39':[28,35],'31-32':[35,36],'31-33':[33,35],'31-34':[2,35],'31-35':[35],'31-36':[6,37],'31-37':[6,37],'31-38':[38],'31-39':[28,35],'32-33':[33,35],'32-34':[2,35],'32-35':[35],'32-36':[6,37],'32-37':[6,37],'32-38':[38],'32-39':[28,35],'33-34':[2,35],'33-35':[35],'33-36':[6,37],'33-37':[6,37],'33-38':[38],'33-39':[28,35],'34-35':[35],'34-36':[6,37],'34-37':[6,37],'34-38':[38],'34-39':[28,35],'35-36':[6,37],'35-37':[6,37],'35-38':[38],'35-39':[28,35],'36-37':[6,37],'36-38':[38],'36-39':[28,35],'37-38':[38],'37-39':[28,35],'38-39':[28,35]};

        // --- APPLICATION LOGIC ---
        document.addEventListener('DOMContentLoaded', () => {
            const improvingSelect = document.getElementById('improving-feature');
            const worseningSelect = document.getElementById('worsening-feature');
            const principlesGrid = document.getElementById('principles-grid');
            const subtitle = document.getElementById('principles-subtitle');
            const resetButton = document.getElementById('reset-button');
            const modal = document.getElementById('principle-modal');
            const modalContent = document.querySelector('.modal-content');
            const modalTitle = document.getElementById('modal-title');
            const modalId = document.getElementById('modal-id');
            const modalBody = document.getElementById('modal-body');
            const closeModalButton = document.getElementById('close-modal');

            const initialPlaceholderHTML = principlesGrid.innerHTML;

            function populateSelects() {
                parameters.forEach((param, index) => {
                    const option1 = new Option(param, index + 1);
                    const option2 = new Option(param, index + 1);
                    improvingSelect.add(option1);
                    worseningSelect.add(option2);
                });
            }
            
            function showModal(principleId) {
                const principle = principles[principleId];
                if (!principle) return;

                modalTitle.textContent = principle.name;
                modalId.textContent = `Principio Inventivo #${principleId}`;
                modalBody.innerHTML = `
                    <p class="text-lg mb-4">${principle.desc}</p>
                    <p class="text-base text-gray-400"><strong>Esempi pratici:</strong> ${principle.examples}</p>
                `;
                
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modal.classList.remove('opacity-0');
                    modalContent.classList.remove('opacity-0', 'scale-95');
                }, 10);
            }

            function hideModal() {
                modal.classList.add('opacity-0');
                modalContent.classList.add('opacity-0', 'scale-95');
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            }

            function updatePrinciples() {
                const improvingIndex = improvingSelect.value;
                const worseningIndex = worseningSelect.value;

                if (!improvingIndex || !worseningIndex || improvingIndex === worseningIndex) {
                    if (document.activeElement !== improvingSelect && document.activeElement !== worseningSelect) {
                        resetApp();
                    }
                    return;
                }

                const key = `${improvingIndex}-${worseningIndex}`;
                // Since the matrix is symmetric, we check both directions, but a complete matrix only needs one.
                const principleIds = matrix[key] || matrix[`${worseningIndex}-${improvingIndex}`] || [];
                
                principlesGrid.innerHTML = '';

                if (principleIds.length > 0) {
                    subtitle.textContent = "Ecco i principi più efficaci. Clicca su una card per approfondire.";
                    principleIds.forEach(id => {
                        const principle = principles[id];
                        if (principle) {
                            const card = document.createElement('div');
                            card.className = 'card rounded-xl p-6 cursor-pointer';
                            card.innerHTML = `
                                <div class="flex items-center mb-3">
                                    <span class="flex items-center justify-center h-10 w-10 rounded-full bg-gray-700 text-lg font-bold text-green-400 mr-4">${id}</span>
                                    <h3 class="text-xl font-semibold text-white">${principle.name}</h3>
                                </div>
                                <p class="text-gray-400">${principle.desc.substring(0, 100)}...</p>
                            `;
                            card.addEventListener('click', () => showModal(id));
                            principlesGrid.appendChild(card);
                        }
                    });
                } else {
                    subtitle.textContent = "Nessuna soluzione diretta trovata nella matrice. Prova a riformulare il problema.";
                    const noResultCard = document.createElement('div');
                    noResultCard.className = 'col-span-full text-center py-12 border-2 border-dashed border-gray-600 rounded-lg';
                    noResultCard.innerHTML = `
                        <svg class="mx-auto h-12 w-12 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                        </svg>
                        <h3 class="mt-2 text-lg font-medium text-gray-300">Contraddizione non comune</h3>
                        <p class="mt-1 text-sm text-gray-500">Questa combinazione specifica non ha principi predefiniti nella matrice standard. Considera di astrarre il problema o di esplorare i principi più frequenti.</p>
                    `;
                    principlesGrid.appendChild(noResultCard);
                }
            }

            function resetApp() {
                improvingSelect.value = "";
                worseningSelect.value = "";
                principlesGrid.innerHTML = initialPlaceholderHTML;
                subtitle.textContent = "I principi raccomandati per risolvere la tua contraddizione appariranno qui.";
            }

            // --- Event Listeners ---
            populateSelects();
            improvingSelect.addEventListener('change', updatePrinciples);
            worseningSelect.addEventListener('change', updatePrinciples);
            resetButton.addEventListener('click', resetApp);
            closeModalButton.addEventListener('click', hideModal);
            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    hideModal();
                }
            });
        });
    </script>
</body>
</html>
